<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>Inscri√ß√£o | Nupieepro</title>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<style>
:root{--main:#0f0732;--accent:#f85900;--bg:#f4f4f9;--glass:rgba(255,255,255,0.95)}*{box-sizing:border-box;margin:0;padding:0;font-family:'Plus Jakarta Sans',sans-serif}body{background:var(--main);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px;background-image:radial-gradient(circle at 10% 20%,#2a1b5e 0%,#0f0732 90%)}.card{background:var(--glass);backdrop-filter:blur(20px);width:100%;max-width:500px;border-radius:24px;overflow:hidden;box-shadow:0 25px 80px rgba(0,0,0,0.4);position:relative;z-index:10}.header{background:linear-gradient(135deg,var(--main) 0%,#1a1245 100%);padding:40px 30px;text-align:center;border-bottom:5px solid var(--accent);color:#fff}.header img{width:85px;border-radius:50%;border:3px solid var(--accent);margin-bottom:15px}.header h2{font-size:1.4rem;font-weight:800;line-height:1.2;margin-bottom:5px}.info-box{background:#f1f5f9;padding:25px 30px;border-bottom:1px solid #e2e8f0;font-size:.9rem;color:#334155}.info-item{display:flex;align-items:center;gap:10px;margin-bottom:8px;font-weight:600;color:var(--main)}.desc-text{margin-bottom:15px;padding-bottom:15px;border-bottom:1px solid #cbd5e1;line-height:1.6}form{padding:30px}.field{margin-bottom:20px}label{display:block;font-size:.85rem;font-weight:700;color:var(--main);margin-bottom:8px}input,select,textarea{width:100%;padding:16px;border:2px solid #e2e8f0;border-radius:12px;font-size:1rem;outline:none;transition:.3s;background:#fff}input:focus,select:focus,textarea:focus{border-color:var(--accent);box-shadow:0 8px 20px rgba(248,89,0,0.15);transform:translateY(-2px)}.btn{width:100%;padding:20px;background:var(--main);color:#fff;border:none;border-radius:14px;font-weight:800;cursor:pointer;transition:.3s;font-size:1.1rem;margin-top:10px}.btn:hover{background:#1a1245}.other-input{display:none;margin-top:10px}#loading{padding:80px 30px;text-align:center;color:#fff;font-weight:600}.spinner{width:50px;height:50px;border:5px solid rgba(255,255,255,0.3);border-top:5px solid var(--accent);border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 20px}@keyframes spin{to{transform:rotate(360deg)}}.page-footer{position:fixed;bottom:15px;width:100%;text-align:center;color:#fff;font-size:.75rem;opacity:.5}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{background-color:var(--accent)!important}
</style>
</head>
<body>
<div id="loading"><div class="spinner"></div><p>Carregando...</p></div>
<div class="card" id="card-main" style="display:none"><div class="header"><img src="https://i.ibb.co/FkYzNVcT/download.jpg"><h2 id="ev-titulo">---</h2><p>N√∫cleo Piauiense de Estudantes de Engenharia de Produ√ß√£o</p></div><div class="info-box" id="info-area" style="display:none"><div id="ev-desc" class="desc-text"></div><div class="info-item"><i class="fa-solid fa-calendar-day" style="color:var(--accent)"></i> <span id="ev-data"></span></div><div class="info-item"><i class="fa-solid fa-clock" style="color:var(--accent)"></i> <span id="ev-hora"></span></div><div class="info-item"><i class="fa-solid fa-microphone" style="color:var(--accent)"></i> <span id="ev-palestrante"></span></div><div class="info-item"><i class="fa-solid fa-video" style="color:var(--accent)"></i> <span id="ev-formato"></span></div></div><form id="form"><div class="field"><label>Nome Completo *</label><input type="text" name="Nome" required></div><div class="field"><label>E-mail *</label><input type="email" id="email1" name="Email" required autocomplete="off"></div><div class="field"><label>Confirme seu E-mail *</label><input type="email" id="email2" required autocomplete="off" onpaste="return false"></div><div class="field"><label>Institui√ß√£o de Ensino *</label><select id="sel-inst" onchange="toggle('inst')" required><option value="" disabled selected>Selecione...</option><option>UFPI</option><option>FACID</option><option>UNIFSA</option><option>Outra</option></select><input type="text" id="out-inst" class="other-input" placeholder="Digite sua Institui√ß√£o"><input type="hidden" name="Instituicao" id="final-inst"></div><div class="field"><label>Curso *</label><select id="sel-curso" onchange="toggle('curso')" required><option value="" disabled selected>Selecione...</option><option>Engenharia de Produ√ß√£o</option><option>Engenharia Mec√¢nica</option><option>Engenharia El√©trica</option><option>Engenharia Civil</option><option>Outro</option></select><input type="text" id="out-curso" class="other-input" placeholder="Digite seu Curso"><input type="hidden" name="Curso" id="final-curso"></div><div class="field"><label>Per√≠odo *</label><select name="Periodo" required><option value="" disabled selected>Selecione...</option><option>1¬∫</option><option>2¬∫</option><option>3¬∫</option><option>4¬∫</option><option>5¬∫</option><option>6¬∫</option><option>7¬∫</option><option>8¬∫</option><option>9¬∫</option><option>10¬∫</option><option>Concluinte / Formando</option><option>Egresso / P√≥s</option></select></div><div class="field"><label>Como ficou sabendo? *</label><select id="sel-origem" onchange="toggle('origem')" required><option value="" disabled selected>Selecione...</option><option>WhatsApp</option><option>Indica√ß√£o</option><option>Instagram</option><option>Outra</option></select><input type="text" id="out-origem" class="other-input" placeholder="Digite onde soube"><input type="hidden" name="Origem" id="final-origem"></div><div class="field"><label>D√∫vida espec√≠fica? (Opcional)</label><textarea name="Duvida" rows="3"></textarea></div><input type="hidden" name="Evento" id="ev-hidden"><button type="button" class="btn" onclick="enviar()">CONFIRMAR INSCRI√á√ÉO <i class="fa-solid fa-arrow-right"></i></button></form></div>

<div class="card" id="tela-msg" style="display:none;text-align:center;padding:60px 40px">
    <i id="icon-msg" class="fa-solid" style="font-size:5rem;margin-bottom:25px"></i>
    <h2 id="tit-msg" style="color:var(--main);margin-bottom:15px"></h2>
    <p id="txt-msg" style="color:#64748b;line-height:1.6"></p>
</div>

<div class="card" id="tela-fechado" style="display:none;text-align:center;padding:60px 40px">
    <i class="fa-solid fa-lock" style="font-size:5rem;color:#cbd5e1;margin-bottom:25px"></i>
    <h2 style="color:var(--main);margin-bottom:15px">Inscri√ß√µes Encerradas</h2>
    <p style="color:#64748b;line-height:1.6">As vagas foram preenchidas ou n√£o h√° evento ativo.<br>Fique ligado em novas novidades no Instagram <strong>@nupieepro</strong> üíôüß°</p>
</div>

<div class="page-footer">NUPIEEPRO 2026 üíôüß°</div>
<script>
// --- AQUI EST√Å A SUA URL ---
const API = "https://script.google.com/macros/s/AKfycbyHQG1P43Johs9NvxkaoKNELhsXagVmCammU2kCLmibsQriH7OP863nUZssCl3CNOLkoQ/exec";

function toggle(t){const s=document.getElementById('sel-'+t),o=document.getElementById('out-'+t),f=document.getElementById('final-'+t);if(s.value.includes('Outr')||s.value.includes('Outra')){o.style.display='block';o.required=true;f.value='';o.focus()}else{o.style.display='none';o.required=false;f.value=s.value}}
['inst','curso','origem'].forEach(t=>{document.getElementById('out-'+t).addEventListener('input',function(){document.getElementById('final-'+t).value=this.value})});

window.onload=async()=>{
    try{
        const r=await fetch(API).then(res=>res.json());
        document.getElementById('loading').style.display='none';
        
        // L√ìGICA DE EVENTO FECHADO
        if(r.manutencao || r.status === "FECHADO"){
            msg('lock','#cbd5e1','Inscri√ß√µes Encerradas','As vagas foram preenchidas ou n√£o h√° evento ativo.<br>Fique ligado em novas novidades no Instagram <strong>@nupieepro</strong> üíôüß°');
        } else {
            document.getElementById('card-main').style.display='block';
            document.getElementById('ev-titulo').innerText=r.nome;
            document.getElementById('ev-hidden').value=r.nome;
            if(r.descricao){
                document.getElementById('info-area').style.display='block';
                document.getElementById('ev-desc').innerHTML=r.descricao;
                document.getElementById('ev-data').innerText=r.data;
                document.getElementById('ev-hora').innerText=r.horario;
                document.getElementById('ev-palestrante').innerText=r.palestrante;
                document.getElementById('ev-formato').innerText=r.formato;
            }
        }
    }catch(e){
        msg('wifi','#cbd5e1','Erro de Conex√£o','Recarregue a p√°gina.');
    }
};

async function enviar(){
    const f=document.getElementById('form');
    if(document.getElementById('email1').value.toLowerCase()!==document.getElementById('email2').value.toLowerCase()){return Swal.fire('Erro','E-mails n√£o conferem.','error')}
    if(!f.checkValidity()){f.reportValidity();return}
    const b=document.querySelector('.btn');
    b.innerHTML='PROCESSANDO...';b.disabled=true;
    try{
        const r=await fetch(API,{method:'POST',body:new URLSearchParams(new FormData(f))}).then(res=>res.json());
        if(r.result==='success'){
            document.getElementById('card-main').style.display='none';
            msg('circle-check','#10b981','Inscri√ß√£o Confirmada!','Sua vaga est√° garantida. Enviamos um e-mail. üíôüß°');
        }else{
            Swal.fire('Aten√ß√£o',r.msg,'warning');
            b.innerHTML='TENTAR NOVAMENTE';b.disabled=false
        }
    }catch(e){
        Swal.fire('Erro','Falha na conex√£o.','error');
        b.disabled=false;b.innerHTML='CONFIRMAR INSCRI√á√ÉO'
    }
}

function msg(i,c,t,d){
    document.getElementById('tela-msg').style.display='block';
    document.getElementById('card-main').style.display='none';
    document.getElementById('tela-fechado').style.display='none'; 
    document.getElementById('icon-msg').className='fa-solid fa-'+i;
    document.getElementById('icon-msg').style.color=c;
    document.getElementById('tit-msg').innerText=t;
    document.getElementById('txt-msg').innerHTML=d;
}
</script></body></html>
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 30px;
            font-size: 0.85rem; font-weight: 500; 
            color: rgba(255, 255, 255, 0.9); /* Texto Branco */
            white-space: nowrap; backdrop-filter: blur(5px);
            transition: all 0.3s ease; cursor: pointer;
        }
        
        /* Bot√£o ATIVO (Branco) */
        .filter-btn.active { 
            background: var(--branco); 
            color: var(--roxo-brand); /* Texto Roxo */
            font-weight: 700; border-color: var(--branco);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); 
            transform: translateY(-2px);
        }

        /* --- GRID & CARDS --- */
        .container { max-width: 1100px; margin: 0 auto; padding: 0 20px; display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; position: relative; z-index: 10; }
        @media(min-width: 768px) { .container { grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 30px; } }

        .card {
            background: var(--card-bg); border-radius: 20px; overflow: hidden;
            box-shadow: var(--shadow-sm); display: flex; flex-direction: column;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); position: relative; border: 1px solid rgba(15, 7, 50, 0.05);
        }
        .card:active { transform: scale(0.96); }

        .image-wrapper { width: 100%; aspect-ratio: 1 / 1; background: #f8f9fc; position: relative; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .prod-img { width: 100%; height: 100%; object-fit: cover; z-index: 2; transition: transform 0.5s ease; }
        
        .share-btn {
            position: absolute; top: 12px; right: 12px; width: 36px; height: 36px;
            background: rgba(255,255,255,0.95); border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); z-index: 5; color: var(--roxo-brand); font-size: 0.9rem; cursor: pointer;
            transition: 0.2s;
        }
        .share-btn:active { transform: scale(0.85); background: var(--roxo-brand); color: var(--branco); }

        .no-photo-placeholder { position: absolute; width: 100%; height: 100%; top: 0; left: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; background: linear-gradient(135deg, #f5f7fa 0%, #e4e7ec 100%); color: var(--roxo-brand); z-index: 1; }
        .no-photo-placeholder i { font-size: 2rem; margin-bottom: 8px; opacity: 0.4; }
        .no-photo-placeholder span { font-size: 0.7rem; font-weight: 700; opacity: 0.6; text-transform: uppercase; }

        .card-info { padding: 16px; text-align: center; display: flex; flex-direction: column; flex-grow: 1; cursor: pointer; }
        .card-title { font-size: 0.85rem; font-weight: 700; color: var(--roxo-brand); line-height: 1.3; height: 36px; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; }
        .card-price { font-size: 1.1rem; color: var(--laranja-brand); font-weight: 800; margin-top: 6px; }
        .tap-hint { font-size: 0.65rem; color: #aaa; margin-top: auto; padding-top: 8px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }

        /* --- MODAIS --- */
        .modal-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(15, 7, 50, 0.7); backdrop-filter: blur(8px); z-index: 2000; display: none; justify-content: center; align-items: flex-end; opacity: 0; transition: opacity 0.3s; }
        .modal-bg.active { display: flex; opacity: 1; }
        
        .modal-panel {
            background: var(--card-bg); width: 100%; max-width: 500px;
            border-radius: 30px 30px 0 0; padding: 30px 25px;
            box-shadow: var(--shadow-lg);
            animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            max-height: 90vh; overflow-y: auto; position: relative;
        }
        @media(min-width: 600px) { .modal-bg { align-items: center; } .modal-panel { border-radius: 30px; } }

        .detail-img-box {
            width: 100%; height: 240px; background: #f4f6f9; border-radius: 20px; margin-bottom: 20px;
            display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative; border: 1px solid #eee;
        }
        .detail-img { width: 100%; height: 100%; object-fit: contain; z-index: 2; position: relative; }
        .detail-title { font-size: 1.4rem; font-weight: 800; color: var(--roxo-brand); line-height: 1.2; margin-bottom: 5px; }
        .detail-price { font-size: 1.8rem; color: var(--laranja-brand); font-weight: 800; margin-bottom: 25px; display: inline-block; }

        .nice-select { width: 100%; padding: 16px; border-radius: 15px; border: 2px solid #eef2f6; background: #fff; font-size: 0.95rem; color: var(--texto); font-weight: 600; outline: none; margin-bottom: 20px; appearance: none; transition: 0.3s; }
        .nice-select:focus { border-color: var(--roxo-brand); }
        
        .qty-wrapper { display: flex; align-items: center; justify-content: space-between; background: #f8f9fc; padding: 6px; border-radius: 16px; border: 1px solid #eee; margin-bottom: 25px; }
        .qty-btn { width: 48px; height: 48px; background: white; border: none; border-radius: 12px; font-size: 1.2rem; color: var(--roxo-brand); font-weight: 700; cursor: pointer; box-shadow: var(--shadow-sm); transition: 0.2s; }
        .qty-btn:active { transform: scale(0.9); }
        .qty-num { font-size: 1.3rem; font-weight: 700; color: var(--texto); }

        .btn-primary {
            width: 100%; padding: 18px; border: none; border-radius: 16px;
            background: var(--roxo-brand); color: var(--branco); font-size: 1rem; font-weight: 700;
            display: flex; align-items: center; justify-content: center; gap: 10px;
            cursor: pointer; transition: 0.2s; box-shadow: 0 8px 25px rgba(15, 7, 50, 0.25);
        }
        .btn-primary:active { transform: scale(0.98); }

        .input-box { width: 100%; padding: 16px; border: 1px solid #e0e0e0; border-radius: 12px; margin-bottom: 12px; outline: none; font-size: 0.95rem; transition: all 0.3s; background: #fbfbfb; font-family: inherit; color: var(--texto); }
        .input-box:focus { border-color: var(--roxo-brand); background: #fff; box-shadow: 0 0 0 3px rgba(15, 7, 50, 0.1); }
        
        .radio-option {
            padding: 16px; border: 1px solid #eee; border-radius: 12px; display: flex; align-items: center; gap: 12px;
            cursor: pointer; font-size: 0.95rem; font-weight: 500; transition: 0.2s; margin-bottom: 10px; color: var(--texto);
        }
        .radio-option:has(input:checked) { border-color: var(--laranja-brand); background: #fffbf8; color: var(--laranja-brand); font-weight: 700; box-shadow: inset 0 0 0 1px var(--laranja-brand); }
        .radio-option input { accent-color: var(--laranja-brand); width: 18px; height: 18px; }

        .cart-list { list-style: none; margin: 15px 0 25px; max-height: 220px; overflow-y: auto; border: 1px solid #f0f0f0; border-radius: 16px; padding: 10px; background: #fafafa; }
        .cart-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 10px; border-bottom: 1px solid #eee; }
        .cart-item:last-child { border-bottom: none; }
        .btn-trash { background: #fff0f0; color: var(--vermelho-del); width: 36px; height: 36px; border: none; border-radius: 10px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.2s; }
        .btn-trash:active { background: #ffe0e0; }

        .float-bar {
            position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%) translateY(150px);
            width: 90%; max-width: 450px; 
            background: var(--roxo-brand); 
            color: var(--branco); padding: 14px 30px; border-radius: 50px;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: var(--shadow-lg); z-index: 100;
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 2px solid var(--laranja-brand); cursor: pointer;
        }
        .float-bar.visible { transform: translateX(-50%) translateY(0); }

        #toast {
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%) translateY(-100px);
            background: white; color: var(--roxo-brand); padding: 12px 25px;
            border-radius: 50px; box-shadow: var(--shadow-md);
            font-weight: 600; font-size: 0.9rem; z-index: 3000;
            display: flex; align-items: center; gap: 10px;
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        #toast.show { transform: translateX(-50%) translateY(0); }
        #toast i { color: var(--verde-zap); font-size: 1.1rem; }

        footer { text-align: center; color: var(--texto-suave); font-size: 0.75rem; margin-top: 40px; font-weight: 500; }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        
        .close-btn { 
            position: absolute; top: 20px; right: 20px; 
            background: #f0f2f5; width: 36px; height: 36px; 
            border-radius: 50%; border: none; font-size: 1.2rem; 
            color: var(--roxo-brand); 
            display: flex; align-items: center; justify-content: center; 
            cursor: pointer; transition: 0.2s; z-index: 10;
        }
        .close-btn:active { background: #e0e2e5; }
    </style>
</head>
<body>
    <div id="toast"><i class="fa-solid fa-circle-check"></i> Item adicionado √† sacola!</div>

    <div id="splash-screen">
        <img src="https://i.ibb.co/7hcph2F/download.jpg" alt="Logo" class="splash-img">
        <div class="splash-text">Lojinha Oficial Nupiepro</div>
    </div>
        <header>
        <div class="header-compact-row">
            <img src="https://i.ibb.co/7hcph2F/download.jpg" alt="Logo" class="brand-logo">
            <div class="brand-info">
                <h1 class="brand">Nupiee<span>Pro</span></h1>
                <div class="store-badge"><i class="fa-solid fa-store"></i> Oficial</div>
            </div>
        </div>
        
        <div class="sub-brand">N√∫cleo Piauiense de Estudantes de Engenharia de Produ√ß√£o</div>
        <div class="welcome-msg">üëã Bem-vindo(a), Nupilover!</div>
    </header>

    <div class="filter-container">
        <div class="filter-scroll">
            <button class="filter-btn active" onclick="filtrarProdutos('todos', this)">Todos</button>
            <button class="filter-btn" onclick="filtrarProdutos('camisa', this)">Camisas</button>
            <button class="filter-btn" onclick="filtrarProdutos('acessorio', this)">Acess√≥rios</button>
        </div>
    </div>

    <div class="container" id="vitrine-area"></div>

    <footer>
        <strong>NUPIEEPRO 2026</strong> <i class="fa-solid fa-heart" style="color:var(--azul-coracao); margin-left:5px;"></i><i class="fa-solid fa-heart" style="color:var(--laranja-brand); margin-left:3px;"></i>
    </footer>

    <div class="modal-bg" id="modal-details" onclick="fecharModais(event)">
        <div class="modal-panel">
            <button class="close-btn" onclick="fecharModais(null)"><i class="fa-solid fa-xmark"></i></button>

            <div class="detail-img-box">
                <img src="" id="detalhe-img" class="detail-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
                <div id="detalhe-fallback" class="no-photo-placeholder" style="display:none; position:absolute; z-index:1;">
                    <i class="fa-solid fa-box-open"></i><span>Sem Foto</span>
                </div>
            </div>

            <h2 id="detalhe-nome" class="detail-title">Nome</h2>
            <div id="detalhe-preco" class="detail-price">R$ 0,00</div>

            <div id="wrapper-tamanho" style="display:none;">
                <label style="font-size:0.85rem; font-weight:700; color:var(--texto-suave); margin-bottom:8px; display:block;">Tamanho:</label>
                <select id="select-tamanho" class="nice-select">
                    <option value="P - BBL (Baby Look)">P - BBL (Baby Look)</option>
                    <option value="M - BBL (Baby Look)">M - BBL (Baby Look)</option>
                    <option value="G - BBL (Baby Look)">G - BBL (Baby Look)</option>
                    <option value="GG - BBL (Baby Look)">GG - BBL (Baby Look)</option>
                    <option value="P - Normal">P - Normal</option>
                    <option value="M - Normal">M - Normal</option>
                    <option value="G - Normal">G - Normal</option>
                    <option value="GG - Normal">GG - Normal</option>
                </select>
            </div>

            <label style="font-size:0.85rem; font-weight:700; color:var(--texto-suave); margin-bottom:8px; display:block;">Quantidade:</label>
            <div class="qty-wrapper">
                <button class="qty-btn" onclick="alterarQtd(-1)"><i class="fa-solid fa-minus"></i></button>
                <div class="qty-num" id="detalhe-qtd">1</div>
                <button class="qty-btn" onclick="alterarQtd(1)"><i class="fa-solid fa-plus"></i></button>
            </div>

            <button class="btn-primary" onclick="adicionarAoCarrinho()">Adicionar √† Sacola</button>
        </div>
    </div>

    <div class="modal-bg" id="modal-checkout" onclick="fecharModais(event)">
        <div class="modal-panel">
            <button class="close-btn" onclick="fecharModais(null)"><i class="fa-solid fa-xmark"></i></button>
            <h2 style="color:var(--roxo-brand); margin-bottom:20px; font-size:1.4rem; font-weight:800;">Finalizar Pedido</h2>

            <ul class="cart-list" id="lista-carrinho"></ul>

            <h3 style="color:var(--roxo-brand); font-size:1rem; margin:20px 0 10px; font-weight:700;">Seus Dados</h3>
            <input type="text" id="nome-cliente" class="input-box" placeholder="Seu Nome Completo">
            <input type="tel" id="zap-cliente" class="input-box" placeholder="WhatsApp com DDD">

            <h3 style="color:var(--roxo-brand); font-size:1rem; margin:20px 0 10px; font-weight:700;">Entrega</h3>
            <div class="radio-section">
                <label class="radio-option">
                    <input type="radio" name="entrega" value="Retirada UFPI" checked onchange="toggleEndereco()"> 
                    <i class="fa-solid fa-building-columns" style="color:var(--texto-suave);"></i> Retirada (UFPI)
                </label>
                <label class="radio-option">
                    <input type="radio" name="entrega" value="Entrega" onchange="toggleEndereco()"> 
                    <i class="fa-solid fa-motorcycle" style="color:var(--texto-suave);"></i> Entrega (Verif. Taxa)
                </label>
            </div>
            <div id="box-endereco" style="display:none;">
                <input type="text" id="endereco-cliente" class="input-box" placeholder="Endere√ßo para entrega">
            </div>

            <h3 style="color:var(--roxo-brand); font-size:1rem; margin:20px 0 10px; font-weight:700;">Pagamento</h3>
            <div class="radio-section">
                <label class="radio-option"><input type="radio" name="pgto" value="PIX" checked> PIX</label>
                <label class="radio-option"><input type="radio" name="pgto" value="Dinheiro"> Dinheiro</label>
                <label class="radio-option"><input type="radio" name="pgto" value="Cart√£o"> Cart√£o</label>
            </div>

            <button class="btn-primary" style="background:var(--verde-zap); margin-top:10px;" onclick="enviarPedidoZap()">
                Enviar Pedido <i class="fa-brands fa-whatsapp"></i>
            </button>
        </div>
    </div>

    <div class="float-bar" id="barra-carrinho" onclick="abrirCheckout()">
        <div style="line-height:1.2;">
            <div id="barra-qtd" style="font-size: 0.75rem; opacity: 0.8; font-weight:500;">0 itens</div>
            <div id="barra-total" style="font-weight: 800; font-size: 1.15rem; color: var(--laranja-brand);">R$ 0,00</div>
        </div>
        <div style="font-weight: 700; font-size:0.95rem;">Ver Sacola <i class="fa-solid fa-bag-shopping" style="margin-left:5px;"></i></div>
    </div>
        <script>
        const whatsappDestino = "5586999976226"; 

        const produtos = [
            { id: 1, nome: "Camisa PRETA - Eng. Produ√ß√£o", preco: 38.00, tipo: "camisa", categoria: "camisa", img: "https://i.ibb.co/TDhnM6xW/unnamed.png" },
            { id: 2, nome: "Camisa BRANCA - Eng. Produ√ß√£o", preco: 38.00, tipo: "camisa", categoria: "camisa", img: "https://i.ibb.co/bM9mqjXS/unnamed-1.png" },
            { id: 3, nome: "Camisa AZUL - Eng. Produ√ß√£o", preco: 38.00, tipo: "camisa", categoria: "camisa", img: "https://i.ibb.co/qLzdtvkN/unnamed-2.png" },
            { id: 4, nome: "Ecobag Nupiepro", preco: 22.00, tipo: "unico", categoria: "acessorio", img: "https://i.ibb.co/7dj3kxt0/unnamed-3.png" },
            { id: 5, nome: "Bloco de Anota√ß√µes", preco: 16.00, tipo: "unico", categoria: "acessorio", img: "https://i.ibb.co/hxxnxrbF/unnamed-4.png" },
            { id: 6, nome: "Chaveiro Abridor", preco: 5.00, tipo: "unico", categoria: "acessorio", img: "https://i.ibb.co/Kj00Xbys/unnamed-5.png" },
            { id: 7, nome: "Bottons Personalizados", preco: 5.00, tipo: "unico", categoria: "acessorio", img: "https://i.ibb.co/mrsm95Kv/1769766015274.png" }
        ];

        let carrinho = [];
        let itemSelecionado = null;
        let qtdTemporaria = 1;
        let filtroAtual = 'todos';

        // --- INICIALIZA√á√ÉO E DEEP LINKING ---
        window.addEventListener('load', () => {
            const splash = document.getElementById('splash-screen');
            carregarDadosUsuario();
            carregarVitrine();
            
            // Verifica se o link √© direto (ex: .../?id=1)
            const urlParams = new URLSearchParams(window.location.search);
            const produtoId = urlParams.get('id');

            if (produtoId) {
                const idInt = parseInt(produtoId);
                if(produtos.find(p => p.id === idInt)) {
                    abrirDetalhes(idInt);
                }
            }

            setTimeout(() => {
                splash.classList.add('hidden');
                setTimeout(() => splash.style.display = 'none', 600);
            }, 2200);
        });

        function mostrarToast(msg) {
            const toast = document.getElementById('toast');
            toast.innerHTML = `<i class="fa-solid fa-circle-check"></i> ${msg}`;
            toast.classList.add('show');
            setTimeout(() => { toast.classList.remove('show'); }, 3000);
        }

        function filtrarProdutos(cat, btn) {
            filtroAtual = cat;
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            if(btn) btn.classList.add('active');
            carregarVitrine();
        }

        function compartilhar(id, event) {
            event.stopPropagation(); 
            const prod = produtos.find(p => p.id === id);
            
            // Gera link espec√≠fico do produto
            const baseUrl = window.location.href.split('?')[0];
            const linkDireto = `${baseUrl}?id=${id}`;

            const textoShare = `Olha o que encontrei na Lojinha Nupiepro: ${prod.nome} por R$ ${prod.preco.toFixed(2)}!`;
            
            if (navigator.share) {
                navigator.share({ title: 'Nupiepro Store', text: textoShare, url: linkDireto }).catch(console.error);
            } else {
                navigator.clipboard.writeText(linkDireto).then(() => {
                    alert("Link do produto copiado: " + linkDireto);
                });
            }
        }

        const vitrineArea = document.getElementById('vitrine-area');
        
        function carregarVitrine() {
            vitrineArea.innerHTML = '';
            const produtosFiltrados = produtos.filter(p => filtroAtual === 'todos' || p.categoria === filtroAtual);

            produtosFiltrados.forEach(p => {
                let imgHTML = '';
                if(p.img && p.img.length > 5) {
                    imgHTML = `<img src="${p.img}" class="prod-img" referrerpolicy="no-referrer" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
                               <div class="no-photo-placeholder" style="display:none;"><i class="fa-solid fa-image"></i><span>Ver Foto</span></div>`;
                } else {
                    let icon = p.nome.includes("Botton") ? "fa-certificate" : "fa-box-open";
                    imgHTML = `<div class="no-photo-placeholder"><i class="fa-solid ${icon}" style="color:var(--laranja-brand)"></i><span>${p.nome}</span></div>`;
                }

                vitrineArea.innerHTML += `
                    <div class="card" onclick="abrirDetalhes(${p.id})">
                        <div class="share-btn" onclick="compartilhar(${p.id}, event)"><i class="fa-solid fa-share-nodes"></i></div>
                        <div class="image-wrapper">${imgHTML}</div>
                        <div class="card-info" onclick="abrirDetalhes(${p.id})">
                            <div class="card-title">${p.nome}</div>
                            <div class="card-price">R$ ${p.preco.toFixed(2).replace('.',',')}</div>
                            <div class="tap-hint">Ver Detalhes</div>
                        </div>
                    </div>
                `;
            });
        }

        function abrirDetalhes(id) {
            itemSelecionado = produtos.find(p => p.id === id);
            qtdTemporaria = 1;

            document.getElementById('detalhe-nome').innerText = itemSelecionado.nome;
            document.getElementById('detalhe-preco').innerText = `R$ ${itemSelecionado.preco.toFixed(2).replace('.',',')}`;
            document.getElementById('detalhe-qtd').innerText = qtdTemporaria;

            const imgEl = document.getElementById('detalhe-img');
            const fallbackEl = document.getElementById('detalhe-fallback');
            
            if(itemSelecionado.img) {
                imgEl.src = itemSelecionado.img; imgEl.style.display = 'block'; fallbackEl.style.display = 'none';
            } else {
                imgEl.style.display = 'none'; fallbackEl.style.display = 'flex';
                fallbackEl.querySelector('i').className = itemSelecionado.nome.includes("Botton") ? "fa-solid fa-certificate" : "fa-solid fa-box-open";
            }

            document.getElementById('wrapper-tamanho').style.display = (itemSelecionado.tipo === 'camisa') ? 'block' : 'none';
            document.getElementById('modal-details').classList.add('active');
        }

        function fecharModais(e) {
            if(e && e.target !== e.currentTarget) return;
            document.getElementById('modal-details').classList.remove('active');
            document.getElementById('modal-checkout').classList.remove('active');
            
            // Limpa URL para n√£o reabrir o modal ao atualizar
            const baseUrl = window.location.href.split('?')[0];
            window.history.replaceState({}, document.title, baseUrl);
        }

        function alterarQtd(valor) {
            qtdTemporaria += valor;
            if(qtdTemporaria < 1) qtdTemporaria = 1;
            document.getElementById('detalhe-qtd').innerText = qtdTemporaria;
        }

        function adicionarAoCarrinho() {
            let tamanhoEscolhido = '√önico';
            if(itemSelecionado.tipo === 'camisa') {
                tamanhoEscolhido = document.getElementById('select-tamanho').value;
            }

            const index = carrinho.findIndex(i => i.id === itemSelecionado.id && i.tamanho === tamanhoEscolhido);
            if(index >= 0) carrinho[index].qtd += qtdTemporaria;
            else carrinho.push({ ...itemSelecionado, tamanho: tamanhoEscolhido, qtd: qtdTemporaria });

            mostrarToast("Adicionado √† sacola!");
            document.getElementById('modal-details').classList.remove('active');
            atualizarBarraFlutuante();
            
            const baseUrl = window.location.href.split('?')[0];
            window.history.replaceState({}, document.title, baseUrl);
        }

        function atualizarBarraFlutuante() {
            const bar = document.getElementById('barra-carrinho');
            if(carrinho.length > 0) bar.classList.add('visible');
            else bar.classList.remove('visible');

            const total = carrinho.reduce((acc, item) => acc + (item.preco * item.qtd), 0);
            const totalQtd = carrinho.reduce((acc, item) => acc + item.qtd, 0);

            document.getElementById('barra-total').innerText = `R$ ${total.toFixed(2).replace('.',',')}`;
            document.getElementById('barra-qtd').innerText = `${totalQtd} item(ns)`;
        }

        function abrirCheckout() {
            if(carrinho.length === 0) return;
            renderizarListaCarrinho();
            document.getElementById('modal-checkout').classList.add('active');
        }

        function renderizarListaCarrinho() {
            const lista = document.getElementById('lista-carrinho');
            lista.innerHTML = '';
            if(carrinho.length === 0) { fecharModais(null); return; }

            carrinho.forEach((item, idx) => {
                let subtitulo = `R$ ${item.preco.toFixed(2).replace('.',',')}`;
                if(item.tipo === 'camisa') subtitulo += ` | ${item.tamanho}`;
                lista.innerHTML += `
                    <li class="cart-item">
                        <div class="cart-item-info"><strong>${item.qtd}x ${item.nome}</strong><span>${subtitulo}</span></div>
                        <button class="btn-trash" onclick="removerDoCarrinho(${idx})"><i class="fa-solid fa-trash"></i></button>
                    </li>
                `;
            });
        }

        function removerDoCarrinho(index) {
            carrinho.splice(index, 1);
            atualizarBarraFlutuante();
            renderizarListaCarrinho();
        }

        function toggleEndereco() {
            const tipoEntrega = document.querySelector('input[name="entrega"]:checked').value;
            document.getElementById('box-endereco').style.display = (tipoEntrega === 'Entrega') ? 'block' : 'none';
        }

        function salvarDadosUsuario(nome, zap, endereco) {
            localStorage.setItem('nupieepro_nome', nome);
            localStorage.setItem('nupieepro_zap', zap);
            localStorage.setItem('nupieepro_endereco', endereco);
        }

        function carregarDadosUsuario() {
            const nome = localStorage.getItem('nupieepro_nome');
            const zap = localStorage.getItem('nupieepro_zap');
            const endereco = localStorage.getItem('nupieepro_endereco');

            if(nome) document.getElementById('nome-cliente').value = nome;
            if(zap) document.getElementById('zap-cliente').value = zap;
            if(endereco) document.getElementById('endereco-cliente').value = endereco;
        }

        function enviarPedidoZap() {
            const nome = document.getElementById('nome-cliente').value;
            const zap = document.getElementById('zap-cliente').value;
            const tipoEntrega = document.querySelector('input[name="entrega"]:checked').value;
            const endereco = document.getElementById('endereco-cliente').value;
            const pgto = document.querySelector('input[name="pgto"]:checked').value;

            if(!nome || !zap) { alert("Preencha Nome e WhatsApp!"); return; }
            if(tipoEntrega === 'Entrega' && !endereco) { alert("Informe o endere√ßo!"); return; }

            salvarDadosUsuario(nome, zap, endereco);

            let msg = `*LOJINHA OFICIAL NUPIEEPRO* ‚öôÔ∏è\n------------------------------\n`;
            msg += `üë§ *Cliente:* ${nome}\nüì± *WhatsApp:* ${zap}\n`;
            msg += `üöö *M√©todo:* ${tipoEntrega}\n`;
            if(tipoEntrega === 'Entrega') msg += `üìç *Endere√ßo:* ${endereco}\n`;
            msg += `üí≥ *Pagamento:* ${pgto}\n\n*ITENS DO PEDIDO:*\n`;
            
            carrinho.forEach(item => {
                msg += `üì¶ ${item.qtd}x *${item.nome}*\n`;
                if(item.tipo === 'camisa') msg += `   ‚îî Tam: ${item.tamanho}\n`;
                msg += `   ‚îî R$ ${(item.preco * item.qtd).toFixed(2).replace('.',',')}\n`;
            });

            const total = carrinho.reduce((acc, item) => acc + (item.preco * item.qtd), 0);
            msg += `\n------------------------------\n*üí∞ TOTAL: R$ ${total.toFixed(2).replace('.',',')}*\n------------------------------\n`;
            if(pgto === 'PIX') msg += `‚ÑπÔ∏è Aguardo a chave PIX.`;

            window.open(`https://wa.me/${whatsappDestino}?text=${encodeURIComponent(msg)}`, '_blank');
        }
    </script>
</body>
</html>
